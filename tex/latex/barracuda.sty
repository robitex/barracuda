%
\NeedsTeXFormat{LaTeX2e}[2009/06/27]
\ProvidesPackage{barracuda}[2018/12/30 v0.1 a barcode typesetting package]%

\newbox\barracudabox
\newcommand\barracuda[2]{\directlua{
    local barracuda = require "barracuda"
    local e = [[#1]]
    local s = [[#2]]
    local enc, err = barracuda:get_barcode_class():new_encoder(e)
    assert(enc, err)
    local symb, err = enc:from_string(s); assert(symb, err)
    local canvas = barracuda:new_canvas()
    local _, err = symb:append_ga(canvas); assert(not err, err)
    local drv, err = barracuda:load_driver("native"); assert(drv, err)
    drv:ga_to_hbox(canvas, "barracudabox")
}%
\box\barracudabox
}

\endinput
